import{c as H,u as Q,b as ae,r,s as f,j as e,D as pe,d as be,B as d,e as je,f as z,U as R,g as Ne,h as I,a as ye,C as V,S as J,i as K,M as Z,k as ee,N as ve}from"./index-BVjAQhW-.js";import{C as b}from"./card-CZ0wl70l.js";import{P as we}from"./progress-D8BgbHuL.js";import{A as le,a as ce,b as ie,S as W,L as ke}from"./LeaderboardDialog-BZZfw4Em.js";import{P as Ce}from"./ProfilePopup-CL47ky5e.js";import{C as Se}from"./chevron-down-B5xlNZYn.js";import{T as B}from"./trophy-D7mj1Bb1.js";import{D as Pe,a as _e,b as De,c as Me,d as Ae,e as Ee}from"./dialog-D_4AHwmX.js";import{I as Ie}from"./input-BZt2eylR.js";import{L as $}from"./label-CkOCs0L6.js";import{T as Le}from"./textarea-Cv8zfm5H.js";import{S as Oe}from"./switch-N_e9NC08.js";import{R as M}from"./rocket-_geDLWXV.js";import{P as A}from"./plus-CN0EzQs4.js";import{S as $e}from"./share-2-ijJH8U91.js";import{A as Te}from"./award-DckXwxKp.js";import{T as Fe}from"./target-BJSSINY6.js";import"./tabs-EA2VEBdc.js";import"./XPBar-B-r7GDSl.js";import"./profileStyles-BlV3Skav.js";import"./index-Ntlpzael.js";const se=H("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const qe=H("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const te=H("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),ze=({hideProfile:a=!1})=>{const{user:h,signOut:j}=Q(),N=ae(),[l,y]=r.useState(null),[v,k]=r.useState(!1),[C,c]=r.useState(!1);r.useEffect(()=>{h&&S()},[h]);const S=async()=>{const{data:g}=await f.from("profiles").select("*").eq("id",h?.id).single();g&&y(g)},i=async()=>{c(!1),await j()};return h?e.jsxs(e.Fragment,{children:[e.jsxs(pe,{open:C,onOpenChange:c,children:[e.jsx(be,{asChild:!0,children:e.jsxs(d,{variant:"ghost",className:"flex items-center gap-2",children:[e.jsxs(le,{className:"h-8 w-8",children:[e.jsx(ce,{src:l?.avatar_url||void 0}),e.jsx(ie,{children:l?.full_name?.charAt(0)||"U"})]}),e.jsx(Se,{className:"h-4 w-4"})]})}),e.jsxs(je,{align:"end",children:[!a&&e.jsxs(z,{onClick:()=>N("/profile"),children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Profile"]}),e.jsxs(z,{onClick:()=>{const g=document.getElementById("leaderboard-trigger");g&&g.click()},children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Leaderboard"]}),e.jsxs(z,{onClick:i,children:[e.jsx(Ne,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]}),e.jsx(Ce,{userId:h.id,open:v,onOpenChange:k})]}):null},re=["#6366f1","#ef4444","#8b5cf6","#3b82f6","#10b981","#f59e0b","#ec4899"],E=({children:a,onCardCreated:h})=>{const{user:j}=Q(),[N,l]=r.useState(!1),[y,v]=r.useState(""),[k,C]=r.useState(""),[c,S]=r.useState(re[0]),[i,g]=r.useState(!1),[m,n]=r.useState(!1),U=async x=>{if(x.preventDefault(),!j||!y.trim()){I.error("Please enter a title for your card deck");return}n(!0);try{const{data:T,error:L}=await f.from("study_cards").insert({user_id:j.id,title:y.trim(),description:k.trim()||null,color:c,is_public:i}).select().single();if(L)throw L;I.success("Card deck created successfully!"),v(""),C(""),l(!1),h?.()}catch(T){I.error(T.message||"Failed to create card deck")}finally{n(!1)}};return e.jsxs(Pe,{open:N,onOpenChange:l,children:[e.jsx(_e,{asChild:!0,children:a}),e.jsxs(De,{className:"sm:max-w-[500px]",children:[e.jsxs(Me,{children:[e.jsx(Ae,{children:"Create Study Card Deck"}),e.jsx(Ee,{children:"Create a new flashcard deck to help you study"})]}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"title",children:"Title *"}),e.jsx(Ie,{id:"title",value:y,onChange:x=>v(x.target.value),placeholder:"e.g., Art App 2.0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"description",children:"Description (optional)"}),e.jsx(Le,{id:"description",value:k,onChange:x=>C(x.target.value),placeholder:"Add a description for your deck",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{children:"Color"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:re.map(x=>e.jsx("button",{type:"button",onClick:()=>S(x),className:`w-10 h-10 rounded-lg border-2 transition-all ${c===x?"border-foreground scale-110":"border-border hover:border-foreground/50"}`,style:{backgroundColor:x}},x))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx($,{htmlFor:"public",children:"Make this deck public"}),e.jsx(Oe,{id:"public",checked:i,onCheckedChange:g})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:m,children:"Cancel"}),e.jsx(d,{type:"submit",disabled:m,children:m?"Creating...":"Create Deck"})]})]})]})]})},ns=()=>{const{user:a,loading:h}=Q(),{isAdmin:j,loading:N}=ye(),l=ae(),[y,v]=r.useState(null),[k,C]=r.useState([]),[c,S]=r.useState([]),[i,g]=r.useState([]),[m,n]=r.useState("progress"),[U,x]=r.useState(!0),[T,L]=r.useState(!0),[P,X]=r.useState(!1);r.useEffect(()=>{!h&&!a&&l("/auth")},[a,h,l]),r.useEffect(()=>{!N&&j&&l("/admin/dashboard")},[j,N,l]),r.useEffect(()=>{a&&!h&&Promise.all([de(),ne(),_()]).finally(()=>{L(!1)})},[a,h]);const de=r.useCallback(async()=>{if(!a?.id){x(!1);return}try{x(!0);const{data:s,error:t}=await f.from("profiles").select("*").eq("id",a.id).single();if(t){if(console.error("Error fetching profile:",t),t.code==="PGRST116")try{const{data:u,error:p}=await f.from("profiles").insert({id:a.id,email:a.email||"",full_name:a.user_metadata?.full_name||null,role:a.user_metadata?.role||"student"}).select().single();u&&!p&&v(u)}catch(u){console.error("Error creating profile:",u)}}else s&&v(s)}catch(s){console.error("Error in fetchProfile:",s)}finally{x(!1)}},[a]),ne=r.useCallback(async()=>{if(a?.id)try{const{data:s,error:t}=await f.from("posts").select("*").eq("user_id",a.id).order("created_at",{ascending:!1}).limit(5);t?console.error("Error fetching posts:",t):s&&C(s)}catch(s){console.error("Error in fetchPosts:",s)}},[a]),_=r.useCallback(async()=>{if(a?.id)try{const{data:s,error:t}=await f.from("study_cards").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});if(t){console.error("Error fetching cards:",t);return}if(s&&s.length>0){const u=s.map(w=>w.id),{data:p}=await f.from("study_card_items").select("card_id").in("card_id",u),q=new Map;p&&p.forEach(w=>{q.set(w.card_id,(q.get(w.card_id)||0)+1)});const ge=s.map(w=>({...w,card_count:q.get(w.id)||0}));S(ge)}else S([])}catch(s){console.error("Error in fetchMyCards:",s)}},[a]),G=r.useCallback(async()=>{try{const{data:s,error:t}=await f.from("study_cards").select("*").eq("is_public",!0).order("created_at",{ascending:!1}).limit(20);t?console.error("Error fetching public cards:",t):s&&g(s)}catch(s){console.error("Error in fetchPublicCards:",s)}},[]);if(r.useEffect(()=>{(async()=>{const t=[...c.map(p=>p.id),...i.map(p=>p.id)];if(t.length===0){X(!1);return}const{data:u}=await f.from("study_card_items").select("card_id").in("card_id",t).limit(1);X(u&&u.length>0)})()},[c,i]),h||N)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background text-foreground",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-game-green mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading Study Hall..."})]})});if(!a)return null;const D=new Date,oe=D.getDate(),me=new Date(D.getFullYear(),D.getMonth(),1),xe=new Date(D.getFullYear(),D.getMonth()+1,0).getDate(),he=me.getDay(),ue=()=>{const s=[];for(let t=0;t<he;t++)s.push(null);for(let t=1;t<=xe;t++)s.push(t);return s},F=async()=>{if(c.length===0&&i.length===0){I.error("Please create a deck or browse public decks first"),n("my-decks");return}const s=[...c.map(u=>u.id),...i.map(u=>u.id)],{data:t}=await f.from("study_card_items").select("card_id").in("card_id",s).order("card_id").limit(1);if(t&&t.length>0){l(`/study-quest?card=${t[0].card_id}`);return}I.error("No decks with cards available. Please create a deck with at least one card."),n("my-decks")},o=y||{id:a?.id||"",full_name:a?.user_metadata?.full_name||null,avatar_url:null,xp:0,level:1,role:a?.user_metadata?.role||"student",current_streak:null},O=o.level*100,fe=O>0?o.xp%O/O*100:0,Y=o.role.charAt(0).toUpperCase()+o.role.slice(1);return e.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col md:flex-row",children:[e.jsxs("aside",{className:"hidden md:flex w-64 bg-sidebar text-sidebar-foreground border-r border-sidebar-border flex-col shrink-0",children:[e.jsxs("div",{className:"p-4 border-b border-sidebar-border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(W,{className:"h-6 w-6 text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"text-xl font-bold",children:"StudyQuest"})]}),e.jsxs("nav",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>n("progress"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${m==="progress"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{children:"Progress"})]}),e.jsxs("button",{onClick:()=>n("my-decks"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${m==="my-decks"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(se,{className:"h-5 w-5"}),e.jsx("span",{children:"My decks"})]}),e.jsxs("button",{onClick:()=>{n("public-decks"),i.length===0&&G()},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${m==="public-decks"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(te,{className:"h-5 w-5"}),e.jsx("span",{children:"Public decks"})]}),e.jsxs("button",{onClick:()=>l("/profile"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${m==="profile"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(R,{className:"h-5 w-5"}),e.jsx("span",{children:"Profile"})]})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsxs(d,{onClick:F,disabled:!P&&c.length===0&&i.length===0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",title:!P&&c.length===0&&i.length===0?"Create a deck with cards first":"Start studying",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Start Quest"]}),e.jsx(E,{onCardCreated:()=>{_(),n("my-decks")},children:e.jsxs(d,{variant:"outline",className:"w-full border-2",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add"]})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-sidebar-foreground",children:"My decks"}),e.jsx(E,{onCardCreated:()=>{_(),n("my-decks")},children:e.jsx("button",{className:"text-sidebar-foreground/70 hover:text-sidebar-foreground",children:e.jsx(A,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"space-y-2",children:[c.map(s=>e.jsxs("button",{onClick:()=>l(`/deck/${s.id}`),className:"w-full flex items-center gap-2 px-2 py-2 rounded hover:bg-sidebar-accent/50 transition-colors group",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:s.color}}),e.jsx("span",{className:"flex-1 text-left text-sm text-sidebar-foreground/80 group-hover:text-sidebar-foreground",children:s.title}),e.jsx(V,{className:"h-4 w-4 text-sidebar-foreground/50 opacity-0 group-hover:opacity-100 transition-opacity"})]},s.id)),c.length===0&&e.jsx("p",{className:"text-sm text-sidebar-foreground/50 text-center py-4",children:"No decks yet. Create one to get started!"})]})]})]}),e.jsxs(J,{children:[e.jsx(K,{asChild:!0,className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx(d,{variant:"outline",size:"icon",className:"bg-background",children:e.jsx(Z,{className:"h-5 w-5"})})}),e.jsxs(ee,{side:"left",className:"w-64 p-0",children:[e.jsxs("div",{className:"p-4 border-b border-sidebar-border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(W,{className:"h-6 w-6 text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"text-xl font-bold",children:"StudyQuest"})]}),e.jsxs("nav",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>n("progress"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${m==="progress"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(M,{className:"h-5 w-5"}),e.jsx("span",{children:"Progress"})]}),e.jsxs("button",{onClick:()=>n("my-decks"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${m==="my-decks"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(se,{className:"h-5 w-5"}),e.jsx("span",{children:"My decks"})]}),e.jsxs("button",{onClick:()=>{n("public-decks"),i.length===0&&G()},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${m==="public-decks"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(te,{className:"h-5 w-5"}),e.jsx("span",{children:"Public decks"})]}),e.jsxs("button",{onClick:()=>l("/profile"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${m==="profile"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(R,{className:"h-5 w-5"}),e.jsx("span",{children:"Profile"})]})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsxs(d,{onClick:F,disabled:!P&&c.length===0&&i.length===0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",title:!P&&c.length===0&&i.length===0?"Create a deck with cards first":"Start studying",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Start Quest"]}),e.jsx(E,{onCardCreated:()=>{_(),n("my-decks")},children:e.jsxs(d,{variant:"outline",className:"w-full border-2",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Add"]})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-sidebar-foreground",children:"My decks"}),e.jsx(E,{onCardCreated:()=>{_(),n("my-decks")},children:e.jsx("button",{className:"text-sidebar-foreground/70 hover:text-sidebar-foreground",children:e.jsx(A,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"space-y-2",children:[c.map(s=>e.jsxs("button",{onClick:()=>l(`/study-quest?card=${s.id}`),className:"w-full flex items-center gap-2 px-2 py-2 rounded hover:bg-sidebar-accent/50 transition-colors group",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:s.color}}),e.jsx("span",{className:"flex-1 text-left text-sm text-sidebar-foreground/80 group-hover:text-sidebar-foreground",children:s.title}),e.jsx(V,{className:"h-4 w-4 text-sidebar-foreground/50 opacity-0 group-hover:opacity-100 transition-opacity"})]},s.id)),c.length===0&&e.jsx("p",{className:"text-sm text-sidebar-foreground/50 text-center py-4",children:"No decks yet. Create one to get started!"})]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 mt-16 md:mt-0",children:[e.jsx("header",{className:"min-h-16 border-b border-border bg-background/95 backdrop-blur-sm flex items-center justify-end px-3 md:px-6 py-2 shrink-0 gap-2",children:e.jsxs("div",{className:"flex items-center gap-1 md:gap-4 flex-shrink-0",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>l("/study-hall"),className:"text-foreground/80 hover:text-foreground text-xs",children:"Study Hall"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>l("/community"),className:"text-foreground/80 hover:text-foreground text-xs",children:"Community"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>l("/announcements"),className:"text-foreground/80 hover:text-foreground text-xs",children:"Announcements"})]}),e.jsxs(J,{children:[e.jsx(K,{asChild:!0,className:"lg:hidden",children:e.jsx(d,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(Z,{className:"h-4 w-4"})})}),e.jsx(ee,{side:"right",children:e.jsxs("div",{className:"flex flex-col gap-4 mt-8",children:[e.jsx(d,{variant:"ghost",className:"w-full justify-start",onClick:()=>l("/study-hall"),children:"Study Hall"}),e.jsx(d,{variant:"ghost",className:"w-full justify-start",onClick:()=>l("/community"),children:"Community"}),e.jsx(d,{variant:"ghost",className:"w-full justify-start",onClick:()=>l("/announcements"),children:"Announcements"}),e.jsx(d,{variant:"ghost",className:"w-full justify-start",onClick:()=>l("/profile"),children:"Profile"})]})})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-1 md:gap-2",children:[e.jsx(W,{className:"h-4 w-4 md:h-5 md:w-5 text-yellow-500 fill-yellow-500 shrink-0"}),e.jsx("span",{className:"font-semibold text-xs md:text-sm whitespace-nowrap",children:o.xp})]}),e.jsxs(d,{variant:"ghost",size:"sm",className:"hidden md:flex",onClick:()=>{const s=document.getElementById("leaderboard-trigger");s&&s.click()},children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Leaderboard"]}),e.jsx(ve,{}),e.jsx(ze,{hideProfile:!0})]})}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto bg-background",children:m==="public-decks"?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Public Decks"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.map(s=>e.jsxs(b,{className:"p-4 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>l(`/study-quest?card=${s.id}`),children:[e.jsx("div",{className:"w-full h-2 rounded mb-3",style:{backgroundColor:s.color}}),e.jsx("h3",{className:"font-semibold mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to study"})]},s.id)),i.length===0&&e.jsx("p",{className:"text-muted-foreground col-span-full text-center py-8",children:"No public decks available yet."})]})]}):m==="my-decks"?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"My Decks"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.map(s=>e.jsxs(b,{className:"p-4 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>l(`/deck/${s.id}`),children:[e.jsx("div",{className:"w-full h-2 rounded mb-3",style:{backgroundColor:s.color}}),e.jsx("h3",{className:"font-semibold mb-1",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.card_count||0," ",s.card_count===1?"card":"cards"]})]},s.id)),c.length===0&&e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No decks yet."}),e.jsx(E,{onCardCreated:_,children:e.jsxs(d,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Create Your First Deck"]})})]})]})]}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 md:space-y-6",children:[e.jsx(b,{className:"p-4 md:p-6",children:e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsxs(le,{className:"h-12 w-12 md:h-16 md:w-16",children:[e.jsx(ce,{src:o.avatar_url||void 0}),e.jsx(ie,{children:o.full_name?.charAt(0)||"U"})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-yellow-500 text-black rounded-full w-5 h-5 md:w-6 md:h-6 flex items-center justify-center text-xs font-bold",children:o.level})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-1",children:Y}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(we,{value:fe,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs md:text-sm",children:[e.jsxs("span",{className:"text-muted-foreground truncate pr-2",children:["Level ",o.level,": ",O," XP"]}),e.jsxs("span",{className:"text-muted-foreground shrink-0",children:[o.xp," XP"]})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[e.jsx(b,{className:"p-3 md:p-4 bg-gradient-card border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Total XP"}),e.jsx("p",{className:"text-xl font-bold text-game-green",children:o.xp})]}),e.jsx(B,{className:"h-5 w-5 text-game-green"})]})}),e.jsx(b,{className:"p-4 bg-gradient-card border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Materials"}),e.jsx("p",{className:"text-xl font-bold text-blue-500",children:k.length})]}),e.jsx($e,{className:"h-5 w-5 text-blue-500"})]})}),e.jsx(b,{className:"p-4 bg-gradient-card border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Level"}),e.jsx("p",{className:"text-xl font-bold text-level-gold",children:o.level})]}),e.jsx(Te,{className:"h-5 w-5 text-level-gold"})]})}),e.jsx(b,{className:"p-4 bg-gradient-card border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Role"}),e.jsx("p",{className:"text-xl font-bold text-purple-500",children:Y})]}),e.jsx(Fe,{className:"h-5 w-5 text-purple-500"})]})})]}),e.jsxs(b,{className:"p-4 md:p-6",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold mb-4",children:"Start your streak!"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(s=>e.jsx("div",{className:"text-center text-xs text-muted-foreground font-medium",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:ue().map((s,t)=>e.jsx("div",{className:`aspect-square rounded-full flex items-center justify-center text-xs ${s===oe?"bg-red-500 text-white font-bold":s?"bg-muted text-muted-foreground":""}`,children:s},t))})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-3xl md:text-4xl font-bold mb-2",children:o.current_streak||0}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mb-4 md:mb-6",children:o.current_streak&&o.current_streak>0?"Day streak! ðŸ”¥":"Complete a deck to start your streak"}),e.jsxs("div",{className:"relative w-24 h-24 md:w-32 md:h-32",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",stroke:"currentColor",strokeWidth:"4",fill:"none",className:"text-muted"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeDasharray:`${2*Math.PI*45}`,strokeDashoffset:`${2*Math.PI*45*.9}`,className:"text-red-500"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(qe,{className:"h-8 w-8 md:h-12 md:w-12 text-orange-500"})})]}),e.jsxs(d,{onClick:F,disabled:!P&&c.length===0&&i.length===0,className:"mt-6 bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",title:!P&&c.length===0&&i.length===0?"Create a deck with cards first":"Start studying",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Start streak"]})]})]})]})]})})]}),e.jsx(ke,{})]})};export{ns as default};
