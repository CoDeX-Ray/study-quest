import{c as Y,u as U,b as ce,r as a,s as h,j as e,D as we,d as ke,B as n,e as Ce,f as Q,U as X,g as _e,h as v,X as Se,C as Pe,a as De,i as Z,S as ee,k as se,M as re,l as te,N as Me}from"./index-C2eRHlxd.js";import{C as P}from"./card-Bgs0H96b.js";import{P as Ee}from"./progress-KmF6Oaop.js";import{A as T,a as O,b as z,U as qe,S as H,L as Ae}from"./LeaderboardDialog-Dtu-SNAr.js";import{P as Fe}from"./ProfilePopup-U2UbSE_o.js";import{C as Ie}from"./chevron-down-Dif-GodP.js";import{T as G}from"./trophy-BfdInh-a.js";import{D as de,a as Le,b as ne,c as oe,d as me,e as xe}from"./dialog-6NjUAJj2.js";import{I as ue}from"./input-DR7vHhZS.js";import{L as R}from"./label-DkPKeOWD.js";import{T as $e}from"./textarea-BZfqvlbP.js";import{S as Re}from"./switch-eVvJBgfx.js";import{S as Te}from"./search-D8MsqR-a.js";import{R as F}from"./rocket-DEaPnPuu.js";import{P as I}from"./plus-DAQmh6L5.js";import{U as Oe}from"./users-BTHeA5cE.js";import{S as ze}from"./share-2-CEBmGfIP.js";import{A as Ue}from"./award-TKM5LB7o.js";import{T as Be}from"./target-B7m9if-l.js";import"./tabs-qWoLzx-L.js";import"./XPBar-qfkUagvs.js";import"./profileStyles-BlV3Skav.js";import"./index-BcAtmjhf.js";const ae=Y("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const We=Y("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const le=Y("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]),Qe=({hideProfile:r=!1})=>{const{user:x,signOut:N}=U(),j=ce(),[c,w]=a.useState(null),[C,_]=a.useState(!1);a.useEffect(()=>{x&&k()},[x]);const k=async()=>{const{data:i}=await h.from("profiles").select("*").eq("id",x?.id).single();i&&w(i)};return x?e.jsxs(e.Fragment,{children:[e.jsxs(we,{children:[e.jsx(ke,{asChild:!0,children:e.jsxs(n,{variant:"ghost",className:"flex items-center gap-2",children:[e.jsxs(T,{className:"h-8 w-8",children:[e.jsx(O,{src:c?.avatar_url||void 0}),e.jsx(z,{children:c?.full_name?.charAt(0)||"U"})]}),e.jsx(Ie,{className:"h-4 w-4"})]})}),e.jsxs(Ce,{align:"end",children:[!r&&e.jsxs(Q,{onClick:()=>j("/profile"),children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Profile"]}),e.jsxs(Q,{onClick:()=>{const i=document.getElementById("leaderboard-trigger");i&&i.click()},children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Leaderboard"]}),e.jsxs(Q,{onClick:N,children:[e.jsx(_e,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]}),e.jsx(Fe,{userId:x.id,open:C,onOpenChange:_})]}):null},ie=["#6366f1","#ef4444","#8b5cf6","#3b82f6","#10b981","#f59e0b","#ec4899"],L=({children:r,onCardCreated:x})=>{const{user:N}=U(),[j,c]=a.useState(!1),[w,C]=a.useState(""),[_,k]=a.useState(""),[i,y]=a.useState(ie[0]),[o,q]=a.useState(!1),[u,m]=a.useState(!1),t=async l=>{if(l.preventDefault(),!N||!w.trim()){v.error("Please enter a title for your card deck");return}m(!0);try{const{data:g,error:M}=await h.from("study_cards").insert({user_id:N.id,title:w.trim(),description:_.trim()||null,color:i,is_public:o}).select().single();if(M)throw M;v.success("Card deck created successfully!"),C(""),k(""),c(!1),x?.()}catch(g){v.error(g.message||"Failed to create card deck")}finally{m(!1)}};return e.jsxs(de,{open:j,onOpenChange:c,children:[e.jsx(Le,{asChild:!0,children:r}),e.jsxs(ne,{className:"sm:max-w-[500px]",children:[e.jsxs(oe,{children:[e.jsx(me,{children:"Create Study Card Deck"}),e.jsx(xe,{children:"Create a new flashcard deck to help you study"})]}),e.jsxs("form",{onSubmit:t,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"title",children:"Title *"}),e.jsx(ue,{id:"title",value:w,onChange:l=>C(l.target.value),placeholder:"e.g., Art App 2.0",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"description",children:"Description (optional)"}),e.jsx($e,{id:"description",value:_,onChange:l=>k(l.target.value),placeholder:"Add a description for your deck",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{children:"Color"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:ie.map(l=>e.jsx("button",{type:"button",onClick:()=>y(l),className:`w-10 h-10 rounded-lg border-2 transition-all ${i===l?"border-foreground scale-110":"border-border hover:border-foreground/50"}`,style:{backgroundColor:l}},l))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{htmlFor:"public",children:"Make this deck public"}),e.jsx(Re,{id:"public",checked:o,onCheckedChange:q})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>c(!1),disabled:u,children:"Cancel"}),e.jsx(n,{type:"submit",disabled:u,children:u?"Creating...":"Create Deck"})]})]})]})]})},He=()=>{const{user:r}=U(),[x,N]=a.useState(!1);a.useEffect(()=>{const t=()=>N(!0),l=document.getElementById("friend-request-trigger");if(l)return l.addEventListener("click",t),()=>l.removeEventListener("click",t)},[]);const[j,c]=a.useState(""),[w,C]=a.useState([]),[_,k]=a.useState([]),[i,y]=a.useState(!1);a.useEffect(()=>{x&&o()},[x]);const o=async()=>{if(r)try{const{data:t,error:l}=await h.from("friends").select(`
          *,
          profiles:user_id (
            id,
            full_name,
            avatar_url,
            email,
            role
          )
        `).eq("friend_id",r.id).eq("status","pending");if(l)throw l;C(t||[])}catch(t){console.error("Error fetching pending requests:",t)}},q=async()=>{if(!r||!j.trim()){k([]);return}y(!0);try{const{data:t,error:l}=await h.from("profiles").select("id, full_name, avatar_url, email, role").or(`full_name.ilike.%${j}%,email.ilike.%${j}%`).neq("id",r.id).limit(10);if(l)throw l;const{data:g}=await h.from("friends").select("user_id, friend_id, status").or(`user_id.eq.${r.id},friend_id.eq.${r.id}`),M=new Set(g?.flatMap(b=>[b.user_id===r.id?b.friend_id:b.user_id])||[]);k((t||[]).filter(b=>!M.has(b.id)))}catch{v.error("Failed to search users")}finally{y(!1)}},u=async t=>{if(r){y(!0);try{const{error:l}=await h.from("friends").insert({user_id:r.id,friend_id:t,status:"pending"});if(l)throw l;v.success("Friend request sent!"),c(""),k([])}catch(l){v.error(l.message||"Failed to send friend request")}finally{y(!1)}}},m=async(t,l)=>{y(!0);try{if(l){const{error:g}=await h.from("friends").update({status:"accepted"}).eq("id",t);if(g)throw g;v.success("Friend request accepted!")}else{const{error:g}=await h.from("friends").delete().eq("id",t);if(g)throw g;v.success("Friend request declined")}o()}catch(g){v.error(g.message||"Failed to update friend request")}finally{y(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>N(!0),className:"hidden",id:"friend-request-trigger"}),e.jsx(de,{open:x,onOpenChange:N,children:e.jsxs(ne,{className:"sm:max-w-[500px]",children:[e.jsxs(oe,{children:[e.jsx(me,{children:"Friends"}),e.jsx(xe,{children:"Send friend requests and manage your connections"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Te,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ue,{placeholder:"Search users by name or email...",value:j,onChange:t=>{c(t.target.value),q()},className:"pl-10"})]}),_.length>0&&e.jsx("div",{className:"border rounded-lg p-2 space-y-2 max-h-48 overflow-y-auto",children:_.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-accent rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(T,{className:"h-8 w-8",children:[e.jsx(O,{src:t.avatar_url||void 0}),e.jsx(z,{children:t.full_name?.charAt(0)||"U"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.full_name||"Anonymous"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.email})]})]}),e.jsxs(n,{size:"sm",variant:"outline",onClick:()=>u(t.id),disabled:i,children:[e.jsx(qe,{className:"h-3 w-3 mr-1"}),"Add"]})]},t.id))})]}),w.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-semibold",children:"Pending Requests"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:w.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(T,{className:"h-8 w-8",children:[e.jsx(O,{src:t.profiles?.avatar_url||void 0}),e.jsx(z,{children:t.profiles?.full_name?.charAt(0)||"U"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.profiles?.full_name||"Anonymous"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"wants to be your friend"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(n,{size:"sm",variant:"outline",onClick:()=>m(t.id,!1),disabled:i,children:e.jsx(Se,{className:"h-3 w-3"})}),e.jsx(n,{size:"sm",onClick:()=>m(t.id,!0),disabled:i,children:e.jsx(Pe,{className:"h-3 w-3"})})]})]},t.id))})]})]})]})})]})},ps=()=>{const{user:r,loading:x}=U(),{isAdmin:N,loading:j}=De(),c=ce(),[w,C]=a.useState(null),[_,k]=a.useState([]),[i,y]=a.useState([]),[o,q]=a.useState([]),[u,m]=a.useState("progress"),[t,l]=a.useState(!0),[g,M]=a.useState(!0),[b,V]=a.useState(!1);a.useEffect(()=>{!x&&!r&&c("/auth")},[r,x,c]),a.useEffect(()=>{!j&&N&&c("/admin/dashboard")},[N,j,c]),a.useEffect(()=>{r&&!x&&Promise.all([he(),fe(),E()]).finally(()=>{M(!1)})},[r,x]);const he=a.useCallback(async()=>{if(!r?.id){l(!1);return}try{l(!0);const{data:s,error:d}=await h.from("profiles").select("*").eq("id",r.id).single();if(d){if(console.error("Error fetching profile:",d),d.code==="PGRST116")try{const{data:p,error:S}=await h.from("profiles").insert({id:r.id,email:r.email||"",full_name:r.user_metadata?.full_name||null,role:r.user_metadata?.role||"student"}).select().single();p&&!S&&C(p)}catch(p){console.error("Error creating profile:",p)}}else s&&C(s)}catch(s){console.error("Error in fetchProfile:",s)}finally{l(!1)}},[r]),fe=a.useCallback(async()=>{if(r?.id)try{const{data:s,error:d}=await h.from("posts").select("*").eq("user_id",r.id).order("created_at",{ascending:!1}).limit(5);d?console.error("Error fetching posts:",d):s&&k(s)}catch(s){console.error("Error in fetchPosts:",s)}},[r]),E=a.useCallback(async()=>{if(r?.id)try{const{data:s,error:d}=await h.from("study_cards").select("*").eq("user_id",r.id).order("created_at",{ascending:!1});if(d){console.error("Error fetching cards:",d);return}if(s&&s.length>0){const p=s.map(D=>D.id),{data:S}=await h.from("study_card_items").select("card_id").in("card_id",p),W=new Map;S&&S.forEach(D=>{W.set(D.card_id,(W.get(D.card_id)||0)+1)});const ve=s.map(D=>({...D,card_count:W.get(D.id)||0}));y(ve)}else y([])}catch(s){console.error("Error in fetchMyCards:",s)}},[r]),J=a.useCallback(async()=>{try{const{data:s,error:d}=await h.from("study_cards").select("*").eq("is_public",!0).order("created_at",{ascending:!1}).limit(20);d?console.error("Error fetching public cards:",d):s&&q(s)}catch(s){console.error("Error in fetchPublicCards:",s)}},[]);if(a.useEffect(()=>{(async()=>{const d=[...i.map(S=>S.id),...o.map(S=>S.id)];if(d.length===0){V(!1);return}const{data:p}=await h.from("study_card_items").select("card_id").in("card_id",d).limit(1);V(p&&p.length>0)})()},[i,o]),x||j)return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-background text-foreground",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-game-green mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading Study Hall..."})]})});if(!r)return null;const A=new Date,ge=A.getDate(),pe=new Date(A.getFullYear(),A.getMonth(),1),je=new Date(A.getFullYear(),A.getMonth()+1,0).getDate(),be=pe.getDay(),Ne=()=>{const s=[];for(let d=0;d<be;d++)s.push(null);for(let d=1;d<=je;d++)s.push(d);return s},B=async()=>{if(i.length===0&&o.length===0){v.error("Please create a deck or browse public decks first"),m("my-decks");return}const s=[...i.map(p=>p.id),...o.map(p=>p.id)],{data:d}=await h.from("study_card_items").select("card_id").in("card_id",s).order("card_id").limit(1);if(d&&d.length>0){c(`/study-quest?card=${d[0].card_id}`);return}v.error("No decks with cards available. Please create a deck with at least one card."),m("my-decks")},f=w||{id:r?.id||"",full_name:r?.user_metadata?.full_name||null,avatar_url:null,xp:0,level:1,role:r?.user_metadata?.role||"student",current_streak:null},$=f.level*100,ye=$>0?f.xp%$/$*100:0,K=f.role.charAt(0).toUpperCase()+f.role.slice(1);return e.jsxs("div",{className:"min-h-screen bg-background text-foreground flex flex-col md:flex-row",children:[e.jsxs("aside",{className:"hidden md:flex w-64 bg-sidebar text-sidebar-foreground border-r border-sidebar-border flex-col shrink-0",children:[e.jsxs("div",{className:"p-4 border-b border-sidebar-border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(H,{className:"h-6 w-6 text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"text-xl font-bold",children:"StudyQuest"})]}),e.jsxs("nav",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>m("progress"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${u==="progress"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(F,{className:"h-5 w-5"}),e.jsx("span",{children:"Progress"})]}),e.jsxs("button",{onClick:()=>m("my-decks"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${u==="my-decks"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"My decks"})]}),e.jsxs("button",{onClick:()=>{m("public-decks"),o.length===0&&J()},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${u==="public-decks"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(le,{className:"h-5 w-5"}),e.jsx("span",{children:"Public decks"})]}),e.jsxs("button",{onClick:()=>c("/profile"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${u==="profile"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{children:"Profile"})]})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsxs(n,{onClick:B,disabled:!b&&i.length===0&&o.length===0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",title:!b&&i.length===0&&o.length===0?"Create a deck with cards first":"Start studying",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Start Quest"]}),e.jsx(L,{onCardCreated:()=>{E(),m("my-decks")},children:e.jsxs(n,{variant:"outline",className:"w-full border-2",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Add"]})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-sidebar-foreground",children:"My decks"}),e.jsx(L,{onCardCreated:()=>{E(),m("my-decks")},children:e.jsx("button",{className:"text-sidebar-foreground/70 hover:text-sidebar-foreground",children:e.jsx(I,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"space-y-2",children:[i.map(s=>e.jsxs("button",{onClick:()=>c(`/deck/${s.id}`),className:"w-full flex items-center gap-2 px-2 py-2 rounded hover:bg-sidebar-accent/50 transition-colors group",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:s.color}}),e.jsx("span",{className:"flex-1 text-left text-sm text-sidebar-foreground/80 group-hover:text-sidebar-foreground",children:s.title}),e.jsx(Z,{className:"h-4 w-4 text-sidebar-foreground/50 opacity-0 group-hover:opacity-100 transition-opacity"})]},s.id)),i.length===0&&e.jsx("p",{className:"text-sm text-sidebar-foreground/50 text-center py-4",children:"No decks yet. Create one to get started!"})]})]})]}),e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,className:"md:hidden fixed top-4 left-4 z-50",children:e.jsx(n,{variant:"outline",size:"icon",className:"bg-background",children:e.jsx(re,{className:"h-5 w-5"})})}),e.jsxs(te,{side:"left",className:"w-64 p-0",children:[e.jsxs("div",{className:"p-4 border-b border-sidebar-border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx(H,{className:"h-6 w-6 text-yellow-500 fill-yellow-500"}),e.jsx("span",{className:"text-xl font-bold",children:"StudyQuest"})]}),e.jsxs("nav",{className:"space-y-1",children:[e.jsxs("button",{onClick:()=>m("progress"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${u==="progress"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(F,{className:"h-5 w-5"}),e.jsx("span",{children:"Progress"})]}),e.jsxs("button",{onClick:()=>m("my-decks"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${u==="my-decks"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{children:"My decks"})]}),e.jsxs("button",{onClick:()=>{m("public-decks"),o.length===0&&J()},className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${u==="public-decks"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(le,{className:"h-5 w-5"}),e.jsx("span",{children:"Public decks"})]}),e.jsxs("button",{onClick:()=>c("/profile"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${u==="profile"?"bg-sidebar-accent text-sidebar-accent-foreground":"text-sidebar-foreground/70 hover:bg-sidebar-accent/50"}`,children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{children:"Profile"})]})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsxs(n,{onClick:B,disabled:!b&&i.length===0&&o.length===0,className:"w-full bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",title:!b&&i.length===0&&o.length===0?"Create a deck with cards first":"Start studying",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Start Quest"]}),e.jsx(L,{onCardCreated:()=>{E(),m("my-decks")},children:e.jsxs(n,{variant:"outline",className:"w-full border-2",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Add"]})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-sidebar-foreground",children:"My decks"}),e.jsx(L,{onCardCreated:()=>{E(),m("my-decks")},children:e.jsx("button",{className:"text-sidebar-foreground/70 hover:text-sidebar-foreground",children:e.jsx(I,{className:"h-4 w-4"})})})]}),e.jsxs("div",{className:"space-y-2",children:[i.map(s=>e.jsxs("button",{onClick:()=>c(`/study-quest?card=${s.id}`),className:"w-full flex items-center gap-2 px-2 py-2 rounded hover:bg-sidebar-accent/50 transition-colors group",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:s.color}}),e.jsx("span",{className:"flex-1 text-left text-sm text-sidebar-foreground/80 group-hover:text-sidebar-foreground",children:s.title}),e.jsx(Z,{className:"h-4 w-4 text-sidebar-foreground/50 opacity-0 group-hover:opacity-100 transition-opacity"})]},s.id)),i.length===0&&e.jsx("p",{className:"text-sm text-sidebar-foreground/50 text-center py-4",children:"No decks yet. Create one to get started!"})]})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-w-0 mt-16 md:mt-0",children:[e.jsx("header",{className:"min-h-16 border-b border-border bg-background/95 backdrop-blur-sm flex items-center justify-end px-3 md:px-6 py-2 shrink-0 gap-2",children:e.jsxs("div",{className:"flex items-center gap-1 md:gap-4 flex-shrink-0",children:[e.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>c("/study-hall"),className:"text-foreground/80 hover:text-foreground text-xs",children:"Study Hall"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>c("/community"),className:"text-foreground/80 hover:text-foreground text-xs",children:"Community"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>c("/announcements"),className:"text-foreground/80 hover:text-foreground text-xs",children:"Announcements"})]}),e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,className:"lg:hidden",children:e.jsx(n,{variant:"ghost",size:"icon",className:"h-8 w-8",children:e.jsx(re,{className:"h-4 w-4"})})}),e.jsx(te,{side:"right",children:e.jsxs("div",{className:"flex flex-col gap-4 mt-8",children:[e.jsx(n,{variant:"ghost",className:"w-full justify-start",onClick:()=>c("/study-hall"),children:"Study Hall"}),e.jsx(n,{variant:"ghost",className:"w-full justify-start",onClick:()=>c("/community"),children:"Community"}),e.jsx(n,{variant:"ghost",className:"w-full justify-start",onClick:()=>c("/announcements"),children:"Announcements"}),e.jsx(n,{variant:"ghost",className:"w-full justify-start",onClick:()=>c("/profile"),children:"Profile"})]})})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-1 md:gap-2",children:[e.jsx(H,{className:"h-4 w-4 md:h-5 md:w-5 text-yellow-500 fill-yellow-500 shrink-0"}),e.jsx("span",{className:"font-semibold text-xs md:text-sm whitespace-nowrap",children:f.xp})]}),e.jsxs(n,{variant:"ghost",size:"sm",className:"hidden md:flex",onClick:()=>{const s=document.getElementById("leaderboard-trigger");s&&s.click()},children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Leaderboard"]}),e.jsxs(n,{variant:"ghost",size:"sm",className:"hidden md:flex",onClick:()=>{const s=document.getElementById("friend-request-trigger");s&&s.click()},children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Friends"]}),e.jsx(Me,{}),e.jsx(Qe,{hideProfile:!0})]})}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto bg-background",children:u==="public-decks"?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Public Decks"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.map(s=>e.jsxs(P,{className:"p-4 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>c(`/study-quest?card=${s.id}`),children:[e.jsx("div",{className:"w-full h-2 rounded mb-3",style:{backgroundColor:s.color}}),e.jsx("h3",{className:"font-semibold mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to study"})]},s.id)),o.length===0&&e.jsx("p",{className:"text-muted-foreground col-span-full text-center py-8",children:"No public decks available yet."})]})]}):u==="my-decks"?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"My Decks"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.map(s=>e.jsxs(P,{className:"p-4 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>c(`/deck/${s.id}`),children:[e.jsx("div",{className:"w-full h-2 rounded mb-3",style:{backgroundColor:s.color}}),e.jsx("h3",{className:"font-semibold mb-1",children:s.title}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.card_count||0," ",s.card_count===1?"card":"cards"]})]},s.id)),i.length===0&&e.jsxs("div",{className:"col-span-full text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No decks yet."}),e.jsx(L,{onCardCreated:E,children:e.jsxs(n,{children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Create Your First Deck"]})})]})]})]}):e.jsxs("div",{className:"max-w-4xl mx-auto space-y-4 md:space-y-6",children:[e.jsx(P,{className:"p-4 md:p-6",children:e.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsxs(T,{className:"h-12 w-12 md:h-16 md:w-16",children:[e.jsx(O,{src:f.avatar_url||void 0}),e.jsx(z,{children:f.full_name?.charAt(0)||"U"})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-yellow-500 text-black rounded-full w-5 h-5 md:w-6 md:h-6 flex items-center justify-center text-xs font-bold",children:f.level})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold mb-1",children:K}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ee,{value:ye,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs md:text-sm",children:[e.jsxs("span",{className:"text-muted-foreground truncate pr-2",children:["Level ",f.level,": ",$," XP"]}),e.jsxs("span",{className:"text-muted-foreground shrink-0",children:[f.xp," XP"]})]})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4",children:[e.jsx(P,{className:"p-3 md:p-4 bg-gradient-card border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Total XP"}),e.jsx("p",{className:"text-xl font-bold text-game-green",children:f.xp})]}),e.jsx(G,{className:"h-5 w-5 text-game-green"})]})}),e.jsx(P,{className:"p-4 bg-gradient-card border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Materials"}),e.jsx("p",{className:"text-xl font-bold text-blue-500",children:_.length})]}),e.jsx(ze,{className:"h-5 w-5 text-blue-500"})]})}),e.jsx(P,{className:"p-4 bg-gradient-card border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Level"}),e.jsx("p",{className:"text-xl font-bold text-level-gold",children:f.level})]}),e.jsx(Ue,{className:"h-5 w-5 text-level-gold"})]})}),e.jsx(P,{className:"p-4 bg-gradient-card border-border/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Role"}),e.jsx("p",{className:"text-xl font-bold text-purple-500",children:K})]}),e.jsx(Be,{className:"h-5 w-5 text-purple-500"})]})})]}),e.jsxs(P,{className:"p-4 md:p-6",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold mb-4",children:"Start your streak!"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(s=>e.jsx("div",{className:"text-center text-xs text-muted-foreground font-medium",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:Ne().map((s,d)=>e.jsx("div",{className:`aspect-square rounded-full flex items-center justify-center text-xs ${s===ge?"bg-red-500 text-white font-bold":s?"bg-muted text-muted-foreground":""}`,children:s},d))})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-3xl md:text-4xl font-bold mb-2",children:f.current_streak||0}),e.jsx("p",{className:"text-xs md:text-sm text-muted-foreground mb-4 md:mb-6",children:f.current_streak&&f.current_streak>0?"Day streak! ðŸ”¥":"Complete a deck to start your streak"}),e.jsxs("div",{className:"relative w-24 h-24 md:w-32 md:h-32",children:[e.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",stroke:"currentColor",strokeWidth:"4",fill:"none",className:"text-muted"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",stroke:"currentColor",strokeWidth:"4",fill:"none",strokeDasharray:`${2*Math.PI*45}`,strokeDashoffset:`${2*Math.PI*45*.9}`,className:"text-red-500"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(We,{className:"h-8 w-8 md:h-12 md:w-12 text-orange-500"})})]}),e.jsxs(n,{onClick:B,disabled:!b&&i.length===0&&o.length===0,className:"mt-6 bg-blue-600 hover:bg-blue-700 text-white disabled:opacity-50 disabled:cursor-not-allowed",title:!b&&i.length===0&&o.length===0?"Create a deck with cards first":"Start studying",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Start streak"]})]})]})]})]})})]}),e.jsx(Ae,{}),e.jsx(He,{})]})};export{ps as default};
